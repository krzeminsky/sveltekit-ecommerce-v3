DROP TABLE IF EXISTS product;
DROP TABLE IF EXISTS shippingAdress;
DROP TABLE IF EXISTS productOrder;
DROP TABLE IF EXISTS user;
DROP TABLE IF EXISTS session;

CREATE TABLE user(
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    username TEXT NOT NULL UNIQUE,
    password TEXT NOT NULL
);

CREATE TABLE session(
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    expires_at INTEGER NOT NULL,
    user_id INTEGER NOT NULL,

    FOREIGN KEY(user_id) REFERENCES user(id)
);

CREATE TABLE product(
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    price INTEGER NOT NULL
);

CREATE TABLE shippingAddress(
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    firstName TEXT NOT NULL,
    lastName TEXT NOT NULL,
    address TEXT NOT NULL,
    postalCode TEXT NOT NULL,
    country TEXT NOT NULL,
    phoneNumber TEXT NOT NULL
);

CREATE TABLE productOrder(
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    productId INTEGER NOT NULL,
    shippingAdressId INTEGER NOT NULL,
    placementTime INTEGER NOT NULL,
    status TEXT NOT NULL,

    FOREIGN KEY(productId) REFERENCES product(id),
    FOREIGN KEY(shippingAdressId) REFERENCES shippingAddress(id)
);